"use strict";(self.webpackChunkbookstore=self.webpackChunkbookstore||[]).push([[523],{1523:function(e,a,r){r.d(a,{vN:function(){return A},G:function(){return U},cr:function(){return ye}});var l=r(3433),i=r(5861),n=r(9439),t=r(7757),s=r.n(t),o=r(2791),c=r(7689),d=r(5705),u=r(6727),m=u.Ry({title:u.Z_().required("\u041d\u0430\u0437\u0432\u0430 \u043a\u043d\u0438\u0433\u0438 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c \u043f\u043e\u043b\u0435\u043c").max(32,"\u041d\u0430\u0437\u0432\u0430 \u043a\u043d\u0438\u0433\u0438 \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 32 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"),author:u.Z_().required("\u0410\u0432\u0442\u043e\u0440 \u043a\u043d\u0438\u0433\u0438 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c \u043f\u043e\u043b\u0435\u043c").max(32,"\u0410\u0432\u0442\u043e\u0440 \u043a\u043d\u0438\u0433\u0438 \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 32 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"),type:u.Z_().oneOf(["","paper"],"\u041d\u0435 \u0432\u0456\u0440\u043d\u0438\u0439 \u0442\u0438\u043f"),book_year:u.Rx().required("\u0420\u0456\u043a \u0432\u0438\u0434\u0438\u043d\u043d\u044f \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c").test("year","\u041d\u0435 \u0432\u0456\u0440\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442",(function(e){return e&&4===e.toString().length})),book_page_count:u.Z_().required("\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0441\u0442\u043e\u0440\u0456\u043d\u043e\u043a \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0430").test("count","\u0426\u0456\u043b\u0435 \u0447\u0438\u0441\u043b\u043e \u0432\u0456\u0434 10 \u0434\u043e 1500",(function(e){return!isNaN(Number(e))&&/^\d+$/.test(e)&&Number(e)>=10&&Number(e)<=1500})),description:u.Z_().required("\u041e\u043f\u0438\u0441 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c \u043f\u043e\u043b\u0435\u043c").max(5e3,"\u041e\u043f\u0438\u0441 \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 5000 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"),small_image:u.Z_().matches(/^[\S]+[\S\s]*[\S]+$/,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u043f\u043e\u0447\u0438\u043d\u0430\u0442\u0438\u0441\u044f \u0430\u0431\u043e \u0437\u0430\u043a\u0456\u043d\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044f \u043f\u0440\u043e\u0431\u0456\u043b\u043e\u043c").url("\u0411\u0443\u0434\u044c-\u043b\u0430\u0441\u043a\u0430 \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 URL").matches(/^.{10,}$/,"URL \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432").matches(/^(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|png|JPG|JPEG|PNG)$/,"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 jpg, jpeg, png \u0444\u043e\u0440\u043c\u0430\u0442\u0443 ").required("URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u0440\u0442\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0443 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c"),big_image:u.Z_().matches(/^[\S]+[\S\s]*[\S]+$/,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u043f\u043e\u0447\u0438\u043d\u0430\u0442\u0438\u0441\u044f \u0430\u0431\u043e \u0437\u0430\u043a\u0456\u043d\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044f \u043f\u0440\u043e\u0431\u0456\u043b\u043e\u043c").url("\u0411\u0443\u0434\u044c-\u043b\u0430\u0441\u043a\u0430 \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 URL").matches(/^.{10,}$/,"URL \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432").matches(/^(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|png|JPG|JPEG|PNG)$/,"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 jpg, jpeg, png \u0444\u043e\u0440\u043c\u0430\u0442\u0443 ").required("\u041f\u043e\u0441\u0442\u0435\u0440 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c"),price:u.Z_().required("\u0426\u0456\u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u0443 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0430").test("price","\u0427\u0438\u0441\u043b\u043e \u0432\u0456\u0434 1 \u0434\u043e 5000",(function(e){return!isNaN(Number(e))&&Number(e)>=1&&Number(e)<=5e3})),discount:u.Z_().test("discount","\u0427\u0438\u0441\u043b\u043e \u0432\u0456\u0434 0 \u0434\u043e 100",(function(e){return!isNaN(Number(e))&&Number(e)>=0&&Number(e)<=100})),gallery_image:u.Z_().matches(/^[\S]+[\S\s]*[\S]+$/,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u043f\u043e\u0447\u0438\u043d\u0430\u0442\u0438\u0441\u044f \u0430\u0431\u043e \u0437\u0430\u043a\u0456\u043d\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044f \u043f\u0440\u043e\u0431\u0456\u043b\u043e\u043c").url("\u0411\u0443\u0434\u044c-\u043b\u0430\u0441\u043a\u0430 \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 URL").matches(/^.{10,}$/,"URL \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432").matches(/^(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|png|JPG|JPEG|PNG)$/,"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 jpg, jpeg, png \u0444\u043e\u0440\u043c\u0430\u0442\u0443 ")}),p=r(8914),_=r(5188),g=r(9546),h=r(5470),x="Dropdown_container__mwqMJ",j="Dropdown_input__CYNBt",b="Dropdown_selectedValue__VF9Jw",N="Dropdown_menu__bAb77",y="Dropdown_item__z0WmZ",v="Dropdown_selected__vp60u",f="Dropdown_search__NSmr8",k=r(3329),L=function(e){var a=e.className,r=e.placeHolder,l=void 0===r?"":r,i=e.options,t=e.isSearchable,s=e.initialValue,c=e.onClick,d=e.onChange,u=(0,o.useState)(!1),m=(0,n.Z)(u,2),p=m[0],_=m[1],g=(0,o.useState)(s||i[0]||null),L=(0,n.Z)(g,2),B=L[0],F=L[1],C=(0,o.useState)(""),S=(0,n.Z)(C,2),E=S[0],M=S[1],I=(0,o.useRef)(null),Z=(0,o.useRef)();(0,o.useEffect)((function(){M(""),p&&I.current&&I.current.focus()}),[p]),(0,o.useEffect)((function(){var e=function(e){var a=document.getElementById("dropdown-input");!Z.current||Z.current.contains(e.target)||null!==a&&void 0!==a&&a.contains(e.target)||_(!1)};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[]);var P=function(e){return!!B&&B.value===e.value};return(0,k.jsxs)("div",{className:x,children:[(0,k.jsxs)("div",{ref:Z,onClick:function(){_(!p),c()},className:"".concat(j," ").concat(a||""),children:[(0,k.jsx)("p",{className:b,children:B?B.label:l}),(0,k.jsx)(h.U.ARROW,{})]}),p&&(0,k.jsxs)("div",{className:N,children:[t&&(0,k.jsx)("div",{className:f,children:(0,k.jsx)("input",{id:"dropdown-input",onChange:function(e){M(e.target.value)},value:E,ref:I})}),(E?i.filter((function(e){return e.label.toLowerCase().indexOf(E.toLowerCase())>=0})):i).map((function(e){return(0,k.jsx)("div",{onClick:function(){return function(e){F(e),d&&d(e)}(e)},className:"".concat(y," ").concat(P(e)?v:""),children:e.label},e.value)}))]})]})},B=r(2489),F="ImgBookFormList_imgGalleryItem__7LZth",C="ImgBookFormList_imgButtonWrapper__OPdZH",S="ImgBookFormList_imgGalleryContainer__Togk9",E="ImgBookFormList_imgThumb__ZnSJb",M="ImgBookFormList_image__aA-0x",I="ImgBookFormList_button__BLckJ",Z="ImgBookFormList_modalImage__gPiUT",P="Modal_modalBackdrop__qSlW+",w="Modal_modalContent__JODE3",V=function(e){var a=e.isOpen,r=e.onClose,l=e.children;return a&&(0,k.jsx)("div",{className:P,onClick:function(e){e.currentTarget===e.target&&r()},children:(0,k.jsx)("div",{className:w,children:l})})},R=(0,o.memo)((function(e){var a=e.list,r=e.onDelete,l=(0,o.useState)(null),i=(0,n.Z)(l,2),t=i[0],s=i[1];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("ul",{className:S,children:a.map((function(e,a){return(0,k.jsxs)("li",{className:F,children:[(0,k.jsx)("div",{className:E,children:(0,k.jsx)("img",{className:M,src:e,alt:"img-".concat(a)})}),(0,k.jsxs)("div",{className:C,children:[(0,k.jsx)("button",{type:"button",className:I,onClick:function(){s({imgUrl:e,index:a})},children:(0,k.jsx)(h.U.EYE,{fill:"var(--white)"})}),(0,k.jsx)("button",{type:"button",className:I,onClick:function(){r(e)},children:(0,k.jsx)(h.U.TRASH,{stroke:"var(--white)"})})]})]},Math.random().toString(36).substring(2)+(new Date).getTime().toString(36))}))}),t&&(0,k.jsx)(V,{isOpen:!!t,onClose:function(){s(null)},children:(0,k.jsx)("div",{children:(0,k.jsx)("img",{className:Z,src:t.imgUrl,alt:"img-".concat(t.index)})})})]})})),D={form:"BookEditForm_form__O6iDj",inputLabel:"BookEditForm_inputLabel__S6lrI",input:"BookEditForm_input__z2oQT",inputError:"BookEditForm_inputError__gJqxw",inputValid:"BookEditForm_inputValid__nJOxs",smallInputList:"BookEditForm_smallInputList__bDsOI",smallInputLabel:"BookEditForm_smallInputLabel__3Zuzr",textareaLabel:"BookEditForm_textareaLabel__qvoFu",textarea:"BookEditForm_textarea__q2yo1",galleryContainer:"BookEditForm_galleryContainer__yPpGD",galleryInputContainer:"BookEditForm_galleryInputContainer__ufMaJ",image:"BookEditForm_image__Ot5XH",addButton:"BookEditForm_addButton__jMSYS",errorMsg:"BookEditForm_errorMsg__0a+mS",price:"BookEditForm_price__XS5Oc",submitErrorMsg:"BookEditForm_submitErrorMsg__URjmY",button:"BookEditForm_button__RkQgk"},U=function(){var e,a=(new Date).getFullYear(),r=(0,o.useState)(""),t=(0,n.Z)(r,2),u=t[0],h=t[1],x=(0,c.s0)(),j=(0,c.UO)().id,b=(0,c.TH)(),N=null===b||void 0===b||null===(e=b.state)||void 0===e?void 0:e.from,y=(null===N||void 0===N?void 0:N.pathname)+(null===N||void 0===N?void 0:N.search),v=(0,p.i)((function(){return(0,g.zd)(j)}),[]),f=v.data,F=v.loading,C=(0,d.TA)({initialValues:{title:"",author:"",type:"",book_year:"",book_page_count:"",description:"",small_image:"",big_image:"",media_gallery_image:[],price:"",discount:"",gallery_image:""},validationSchema:m,onSubmit:function(){var e=(0,i.Z)(s().mark((function e(a){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={title:a.title,author:a.author,book_year:Number(a.book_year),book_page_count:Number(a.book_page_count),description:a.description,small_image:a.small_image,big_image:a.big_image,media_gallery_image:a.media_gallery_image,price:Number(a.price-a.discount),discount:a.discount},e.next=4,(0,g.u8)(j,r);case 4:200===e.sent.status&&x(y||_.a.HOME),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()}),S=C.values,E=C.errors,M=C.touched,I=C.isValid,Z=C.isSubmitting,P=C.dirty,w=C.handleChange,V=C.handleSubmit,U=C.handleBlur,O=C.setFieldValue,T=C.setFieldTouched,A=C.setValues,q=(0,o.useMemo)((function(){for(var e=[],r=a;r>a-200;r--)e.push({value:r.toString(),label:r.toString()});return e}),[a]);(0,o.useEffect)((function(){if(f){var e={title:f.title,author:f.author,type:"paper",book_year:f.book_year,book_page_count:f.book_page_count,description:f.description,small_image:f.small_image,big_image:f.big_image,media_gallery_image:f.media_gallery_image,price:f.price,discount:0,gallery_image:""};A(e),Object.keys(e).forEach((function(e){return M[e]=!0}))}}),[f]);var G=(0,o.useCallback)((function(e){var a=S.media_gallery_image,r=(0,l.Z)(a).filter((function(a){return a!==e}));O("media_gallery_image",r)}),[S.media_gallery_image]);return F?(0,k.jsx)(B.$,{}):(0,k.jsxs)("form",{onSubmit:V,className:D.form,children:[(0,k.jsxs)("ul",{className:D.inputsList,children:[(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:D.inputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043a\u043d\u0438\u0433\u0438",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(D.input," ").concat(M.title&&(E.title?D.inputError:D.inputValid)),id:"title",name:"title",placeholder:"",value:S.title,onChange:w,onBlur:U}),M.title&&E.title&&(0,k.jsx)("p",{className:D.errorMsg,children:E.title})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:D.inputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0430\u0432\u0442\u043e\u0440\u0430",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(D.input," ").concat(M.author&&(E.author?D.inputError:D.inputValid)),name:"author",placeholder:"",value:S.author,onChange:w,onBlur:U}),M.author&&E.author&&(0,k.jsx)("p",{className:D.errorMsg,children:E.author})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("ul",{className:D.smallInputList,children:[(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:D.smallInputLabel,children:[(0,k.jsx)("p",{children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u0438\u043f \u0432\u0438\u0434\u0430\u043d\u043d\u044f"}),(0,k.jsx)(L,{className:M.type&&(E.type?D.inputError:D.inputValid),options:[{label:"\u041f\u0430\u043f\u0435\u0440\u043e\u0432\u0430",value:"paper"}],initialValue:{label:"\u041f\u0430\u043f\u0435\u0440\u043e\u0432\u0430",value:"paper"},placeHolder:"",onClick:function(){return T("type",!0)},onChange:function(e){var a=e.value;O("type",a),M.type=!0}}),M.type&&E.type&&(0,k.jsx)("p",{className:D.errorMsg,children:E.type})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:D.smallInputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u0456\u043a \u0432\u0438\u0434\u0430\u043d\u043d\u044f",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)(L,{className:M.book_year&&(E.book_year?D.inputError:D.inputValid),options:q,initialValue:{label:S.book_year.toString(),value:S.book_year.toString()},isSearchable:!0,onClick:function(){return T("type",!0)},onChange:function(e){var a=e.value;O("book_year",a),M.book_year=!0}}),M.book_year&&E.book_year&&(0,k.jsx)("p",{className:D.errorMsg,children:E.book_year})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:D.smallInputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0441\u0442\u0440\u0456\u043d\u043e\u043a",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(D.input," ").concat(M.book_page_count&&(E.book_page_count?D.inputError:D.inputValid)),name:"book_page_count",placeholder:"",value:S.book_page_count,onChange:w,onBlur:U}),M.book_page_count&&E.book_page_count&&(0,k.jsx)("p",{className:D.errorMsg,children:E.book_page_count})]})})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:D.textareaLabel,children:[(0,k.jsxs)("p",{children:["\u041e\u043f\u0438\u0441 \u0442\u043e\u0432\u0430\u0440",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("textarea",{className:"".concat(D.textarea," ").concat(M.description&&(E.description?D.inputError:D.inputValid)),name:"description",placeholder:"",value:S.description,onChange:w,onBlur:U}),M.description&&E.description&&(0,k.jsx)("p",{className:D.errorMsg,children:E.description})]})}),(0,k.jsxs)("li",{children:[(0,k.jsxs)("label",{className:D.inputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u0440\u0442\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0443",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(D.input," ").concat(M.small_image&&(E.small_image?D.inputError:D.inputValid)),name:"small_image",placeholder:"",value:S.small_image,onChange:w,onBlur:U}),M.small_image&&E.small_image&&(0,k.jsx)("p",{className:D.errorMsg,children:E.small_image})]}),(0,k.jsx)("img",{className:D.image,src:S.small_image,alt:"book poster"})]}),(0,k.jsxs)("li",{children:[(0,k.jsxs)("label",{className:D.inputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u043e\u0441\u0442\u0435\u0440\u0443 \u0442\u043e\u0432\u0430\u0440\u0443",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(D.input," ").concat(M.big_image&&(E.big_image?D.inputError:D.inputValid)),name:"big_image",placeholder:"",value:S.big_image,onChange:w,onBlur:U}),M.big_image&&E.big_image&&(0,k.jsx)("p",{className:D.errorMsg,children:E.big_image})]}),(0,k.jsx)("img",{className:D.image,src:S.big_image,alt:"book big poster"})]}),(0,k.jsx)("li",{children:(0,k.jsxs)("div",{className:D.galleryContainer,children:[(0,k.jsx)("p",{children:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u043b\u044f \u0433\u0430\u043b\u0435\u0440\u0435\u0457"}),(0,k.jsxs)("div",{className:D.galleryInputContainer,children:[(0,k.jsxs)("label",{className:D.inputLabel,children:[(0,k.jsx)("input",{className:"".concat(D.input," ").concat(M.gallery_image&&(E.gallery_image?D.inputError:D.inputValid)),name:"gallery_image",placeholder:"",value:S.gallery_image,onChange:w,onBlur:U}),M.gallery_image&&E.gallery_image&&(0,k.jsx)("p",{className:D.errorMsg,children:E.gallery_image})]}),(0,k.jsx)("button",{type:"button",className:D.addButton,disabled:E.gallery_image,onClick:function(){!function(e){var a=S.media_gallery_image,r=[].concat((0,l.Z)(a),[e]);O("media_gallery_image",r),O("gallery_image","")}(S.gallery_image)},children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]}),M.media_gallery_image&&E.media_gallery_image&&(0,k.jsx)("p",{className:D.errorMsg,children:E.media_gallery_image}),S.media_gallery_image&&(0,k.jsx)(R,{list:S.media_gallery_image,onDelete:G})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("ul",{className:D.smallInputList,children:[(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:D.smallInputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0446\u0456\u043d\u0443, \u0432 \u0433\u0440\u043d",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(D.input," ").concat(M.price&&(E.price?D.inputError:D.inputValid)),name:"price",placeholder:"",value:S.price,onChange:w,onBlur:U}),M.price&&E.price&&(0,k.jsx)("p",{className:D.errorMsg,children:E.price})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:D.smallInputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0437\u043d\u0438\u0436\u043a\u0443, %",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(D.input," ").concat(M.discount&&(E.discount?D.inputError:D.inputValid)),name:"discount",placeholder:"",value:S.discount,onChange:w,onBlur:U}),M.discount&&E.discount&&(0,k.jsx)("p",{className:D.errorMsg,children:E.discount})]})}),(0,k.jsx)("li",{children:Number(S.price)?(0,k.jsxs)("label",{className:D.smallInputLabel,children:["\u041a\u0456\u043d\u0446\u0435\u0432\u0430 \u0446\u0456\u043d\u0430",(0,k.jsx)("p",{className:D.price,children:function(e,a){var r=Number(e),l=Number(a);return!r||l>100||l<0?null:(r-l*r/100).toFixed(2)+" \u0433\u0440\u043d"}(S.price,S.discount)})]}):(0,k.jsx)("label",{className:D.smallInputLabel})})]})})]}),u&&(0,k.jsx)("p",{className:D.submitErrorMsg,children:u}),(0,k.jsx)("button",{className:D.button,type:"submit",disabled:!I||!P||Z,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})},O=u.Ry({title:u.Z_().required("\u041d\u0430\u0437\u0432\u0430 \u043a\u043d\u0438\u0433\u0438 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c \u043f\u043e\u043b\u0435\u043c").max(32,"\u041d\u0430\u0437\u0432\u0430 \u043a\u043d\u0438\u0433\u0438 \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 32 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"),author:u.Z_().required("\u0410\u0432\u0442\u043e\u0440 \u043a\u043d\u0438\u0433\u0438 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c \u043f\u043e\u043b\u0435\u043c").max(32,"\u0410\u0432\u0442\u043e\u0440 \u043a\u043d\u0438\u0433\u0438 \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 32 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"),type:u.Z_().oneOf(["","paper"],"\u041d\u0435 \u0432\u0456\u0440\u043d\u0438\u0439 \u0442\u0438\u043f"),book_year:u.Rx().required("\u0420\u0456\u043a \u0432\u0438\u0434\u0438\u043d\u043d\u044f \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c").test("year","\u041d\u0435 \u0432\u0456\u0440\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442",(function(e){return e&&4===e.toString().length})),book_page_count:u.Z_().required("\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0441\u0442\u043e\u0440\u0456\u043d\u043e\u043a \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0430").test("count","\u0426\u0456\u043b\u0435 \u0447\u0438\u0441\u043b\u043e \u0432\u0456\u0434 10 \u0434\u043e 1500",(function(e){return!isNaN(Number(e))&&/^\d+$/.test(e)&&Number(e)>=10&&Number(e)<=1500})),description:u.Z_().required("\u041e\u043f\u0438\u0441 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c \u043f\u043e\u043b\u0435\u043c").max(5e3,"\u041e\u043f\u0438\u0441 \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 5000 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"),small_image:u.Z_().matches(/^[\S]+[\S\s]*[\S]+$/,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u043f\u043e\u0447\u0438\u043d\u0430\u0442\u0438\u0441\u044f \u0430\u0431\u043e \u0437\u0430\u043a\u0456\u043d\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044f \u043f\u0440\u043e\u0431\u0456\u043b\u043e\u043c").url("\u0411\u0443\u0434\u044c-\u043b\u0430\u0441\u043a\u0430 \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 URL").matches(/^.{10,}$/,"URL \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432").matches(/^(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|png|JPG|JPEG|PNG)$/,"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 jpg, jpeg, png \u0444\u043e\u0440\u043c\u0430\u0442\u0443 ").required("URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u0440\u0442\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0443 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c"),big_image:u.Z_().matches(/^[\S]+[\S\s]*[\S]+$/,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u043f\u043e\u0447\u0438\u043d\u0430\u0442\u0438\u0441\u044f \u0430\u0431\u043e \u0437\u0430\u043a\u0456\u043d\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044f \u043f\u0440\u043e\u0431\u0456\u043b\u043e\u043c").url("\u0411\u0443\u0434\u044c-\u043b\u0430\u0441\u043a\u0430 \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 URL").matches(/^.{10,}$/,"URL \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432").matches(/^(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|png|JPG|JPEG|PNG)$/,"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 jpg, jpeg, png \u0444\u043e\u0440\u043c\u0430\u0442\u0443 ").required("\u041f\u043e\u0441\u0442\u0435\u0440 \u0454 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0438\u043c"),price:u.Z_().required("\u0426\u0456\u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u0443 \u043e\u0431\u043e\u0432`\u044f\u0437\u043a\u043e\u0432\u0430").test("price","\u0427\u0438\u0441\u043b\u043e \u0432\u0456\u0434 1 \u0434\u043e 5000",(function(e){return!isNaN(Number(e))&&Number(e)>=1&&Number(e)<=5e3})),discount:u.Z_().test("discount","\u0427\u0438\u0441\u043b\u043e \u0432\u0456\u0434 0 \u0434\u043e 100",(function(e){return!isNaN(Number(e))&&Number(e)>=0&&Number(e)<=100})),gallery_image:u.Z_().matches(/^[\S]+[\S\s]*[\S]+$/,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435 \u043f\u043e\u0447\u0438\u043d\u0430\u0442\u0438\u0441\u044f \u0430\u0431\u043e \u0437\u0430\u043a\u0456\u043d\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044f \u043f\u0440\u043e\u0431\u0456\u043b\u043e\u043c").url("\u0411\u0443\u0434\u044c-\u043b\u0430\u0441\u043a\u0430 \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 URL").matches(/^.{10,}$/,"URL \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043d\u0435 \u043c\u0435\u043d\u0448\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432").matches(/^(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|png|JPG|JPEG|PNG)$/,"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 jpg, jpeg, png \u0444\u043e\u0440\u043c\u0430\u0442\u0443 ")}),T={form:"BookAddForm_form__Td2dj",inputLabel:"BookAddForm_inputLabel__nL2z4",input:"BookAddForm_input__Sg8CQ",inputError:"BookAddForm_inputError__H7fVQ",inputValid:"BookAddForm_inputValid__rRQhU",smallInputList:"BookAddForm_smallInputList__ggg9J",smallInputLabel:"BookAddForm_smallInputLabel__5MpKA",textareaLabel:"BookAddForm_textareaLabel__+OntN",textarea:"BookAddForm_textarea__4l-TH",galleryContainer:"BookAddForm_galleryContainer__gZxyJ",galleryInputContainer:"BookAddForm_galleryInputContainer__iqfbI",image:"BookAddForm_image__Fwv07",addButton:"BookAddForm_addButton__dsUz3",errorMsg:"BookAddForm_errorMsg__-DUAT",price:"BookAddForm_price__8CYd4",submitErrorMsg:"BookAddForm_submitErrorMsg__Tf4Yc",button:"BookAddForm_button__2sy9l"},A=function(){var e=(new Date).getFullYear(),a=(0,o.useState)(""),r=(0,n.Z)(a,2),t=r[0],c=r[1],u=(0,o.useState)(!1),m=(0,n.Z)(u,2),p=m[0],_=m[1],h={title:"",author:"",type:"",book_year:"",book_page_count:"",description:"",small_image:"",big_image:"",media_gallery_image:[],price:"",discount:"",gallery_image:""},x=(0,d.TA)({initialValues:h,validationSchema:O,onSubmit:function(){var e=(0,i.Z)(s().mark((function e(a,r){var l,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l={title:a.title,author:a.author,book_year:Number(a.book_year),book_page_count:Number(a.book_page_count),description:a.description,small_image:a.small_image,big_image:a.big_image,media_gallery_image:a.media_gallery_image,price:Number(a.price-a.discount),discount:a.discount},_(!0),e.next=5,(0,g.TA)(l);case 5:i=e.sent,_(!1),201===i.status&&(r.setSubmitting(!1),r.resetForm({values:h})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),_(!1),c(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a,r){return e.apply(this,arguments)}}()}),j=x.values,b=x.errors,N=x.touched,y=x.isValid,v=x.isSubmitting,f=x.dirty,F=x.handleChange,C=x.handleSubmit,S=x.handleBlur,E=x.setFieldValue,M=x.setFieldTouched,I=(0,o.useMemo)((function(){for(var a=[],r=e;r>e-200;r--)a.push({value:r.toString(),label:r.toString()});return a}),[e]),Z=(0,o.useCallback)((function(e){var a=j.media_gallery_image,r=(0,l.Z)(a).filter((function(a){return a!==e}));E("media_gallery_image",r)}),[E,j]);return p?(0,k.jsx)(B.$,{}):(0,k.jsxs)("form",{onSubmit:C,className:T.form,children:[(0,k.jsxs)("ul",{className:T.inputsList,children:[(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:T.inputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043a\u043d\u0438\u0433\u0438",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(T.input," ").concat(N.title&&(b.title?T.inputError:T.inputValid)),id:"title",name:"title",placeholder:"",value:j.title,onChange:F,onBlur:S}),N.title&&b.title&&(0,k.jsx)("p",{className:T.errorMsg,children:b.title})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:T.inputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0430\u0432\u0442\u043e\u0440\u0430",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(T.input," ").concat(N.author&&(b.author?T.inputError:T.inputValid)),name:"author",placeholder:"",value:j.author,onChange:F,onBlur:S}),N.author&&b.author&&(0,k.jsx)("p",{className:T.errorMsg,children:b.author})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("ul",{className:T.smallInputList,children:[(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:T.smallInputLabel,children:[(0,k.jsx)("p",{children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u0438\u043f \u0432\u0438\u0434\u0430\u043d\u043d\u044f"}),(0,k.jsx)(L,{className:N.type&&(b.type?T.inputError:T.inputValid),options:[{label:"\u041f\u0430\u043f\u0435\u0440\u043e\u0432\u0430",value:"paper"}],initialValue:{label:"\u041f\u0430\u043f\u0435\u0440\u043e\u0432\u0430",value:"paper"},onClick:function(){return M("type",!0)},onChange:function(e){var a=e.value;E("type",a),N.type=!0}}),N.type&&b.type&&(0,k.jsx)("p",{className:T.errorMsg,children:b.type})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:T.smallInputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u0456\u043a \u0432\u0438\u0434\u0430\u043d\u043d\u044f",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)(L,{className:N.book_year&&(b.book_year?T.inputError:T.inputValid),options:I,initialValue:{label:j.book_year.toString(),value:j.book_year.toString()},isSearchable:!0,onClick:function(){return M("book_year",!0)},onChange:function(e){var a=e.value;E("book_year",a),N.book_year=!0}}),N.book_year&&b.book_year&&(0,k.jsx)("p",{className:T.errorMsg,children:b.book_year})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:T.smallInputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0441\u0442\u0440\u0456\u043d\u043e\u043a",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(T.input," ").concat(N.book_page_count&&(b.book_page_count?T.inputError:T.inputValid)),name:"book_page_count",placeholder:"",value:j.book_page_count,onChange:F,onBlur:S}),N.book_page_count&&b.book_page_count&&(0,k.jsx)("p",{className:T.errorMsg,children:b.book_page_count})]})})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:T.textareaLabel,children:[(0,k.jsxs)("p",{children:["\u041e\u043f\u0438\u0441 \u0442\u043e\u0432\u0430\u0440",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("textarea",{className:"".concat(T.textarea," ").concat(N.description&&(b.description?T.inputError:T.inputValid)),name:"description",placeholder:"",value:j.description,onChange:F,onBlur:S}),N.description&&b.description&&(0,k.jsx)("p",{className:T.errorMsg,children:b.description})]})}),(0,k.jsxs)("li",{children:[(0,k.jsxs)("label",{className:T.inputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u0440\u0442\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0443",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(T.input," ").concat(N.small_image&&(b.small_image?T.inputError:T.inputValid)),name:"small_image",placeholder:"",value:j.small_image,onChange:F,onBlur:S}),N.small_image&&b.small_image&&(0,k.jsx)("p",{className:T.errorMsg,children:b.small_image})]}),N.small_image&&!b.small_image&&(0,k.jsx)("img",{className:T.image,src:j.small_image,alt:"book poster"})]}),(0,k.jsxs)("li",{children:[(0,k.jsxs)("label",{className:T.inputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u043e\u0441\u0442\u0435\u0440\u0443 \u0442\u043e\u0432\u0430\u0440\u0443",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(T.input," ").concat(N.big_image&&(b.big_image?T.inputError:T.inputValid)),name:"big_image",placeholder:"",value:j.big_image,onChange:F,onBlur:S}),N.big_image&&b.big_image&&(0,k.jsx)("p",{className:T.errorMsg,children:b.big_image})]}),N.big_image&&!b.big_image&&(0,k.jsx)("img",{className:T.image,src:j.big_image,alt:"book big poster"})]}),(0,k.jsx)("li",{children:(0,k.jsxs)("div",{className:T.galleryContainer,children:[(0,k.jsx)("p",{children:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u043b\u044f \u0433\u0430\u043b\u0435\u0440\u0435\u0457"}),(0,k.jsxs)("div",{className:T.galleryInputContainer,children:[(0,k.jsxs)("label",{className:T.inputLabel,children:[(0,k.jsx)("input",{className:"".concat(T.input," ").concat(N.gallery_image&&(b.gallery_image?T.inputError:T.inputValid)),name:"gallery_image",placeholder:"",value:j.gallery_image,onChange:F,onBlur:S}),N.gallery_image&&b.gallery_image&&(0,k.jsx)("p",{className:T.errorMsg,children:b.gallery_image})]}),(0,k.jsx)("button",{type:"button",className:T.addButton,disabled:b.gallery_image,onClick:function(){!function(e){var a=j.media_gallery_image,r=[].concat((0,l.Z)(a),[e]);E("media_gallery_image",r),E("gallery_image","")}(j.gallery_image)},children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]}),N.media_gallery_image&&b.media_gallery_image&&(0,k.jsx)("p",{className:T.errorMsg,children:b.media_gallery_image}),j.media_gallery_image&&(0,k.jsx)(R,{list:j.media_gallery_image,onDelete:Z})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("ul",{className:T.smallInputList,children:[(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:T.smallInputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0446\u0456\u043d\u0443, \u0432 \u0433\u0440\u043d",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(T.input," ").concat(N.price&&(b.price?T.inputError:T.inputValid)),name:"price",placeholder:"",value:j.price,onChange:F,onBlur:S}),N.price&&b.price&&(0,k.jsx)("p",{className:T.errorMsg,children:b.price})]})}),(0,k.jsx)("li",{children:(0,k.jsxs)("label",{className:T.smallInputLabel,children:[(0,k.jsxs)("p",{children:["\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0437\u043d\u0438\u0436\u043a\u0443, \u0432 \u0433\u0440\u043d",(0,k.jsx)("span",{style:{color:"var(--red)"},children:"*"})]}),(0,k.jsx)("input",{className:"".concat(T.input," ").concat(N.discount&&(b.discount?T.inputError:T.inputValid)),name:"discount",placeholder:"",value:j.discount,onChange:F,onBlur:S}),N.discount&&b.discount&&(0,k.jsx)("p",{className:T.errorMsg,children:b.discount})]})}),(0,k.jsx)("li",{children:Number(j.price)?(0,k.jsxs)("label",{className:T.smallInputLabel,children:["\u041a\u0456\u043d\u0446\u0435\u0432\u0430 \u0446\u0456\u043d\u0430",(0,k.jsx)("p",{className:T.price,children:function(e,a){var r=Number(e),l=Number(a);return!r||l>100||l<0?null:(r-l*r/100).toFixed(2)+" \u0433\u0440\u043d"}(j.price,j.discount)})]}):(0,k.jsx)("label",{className:T.smallInputLabel})})]})})]}),t&&(0,k.jsx)("p",{className:T.submitErrorMsg,children:t}),(0,k.jsx)("button",{className:T.button,type:"submit",disabled:!y||!f||v,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})},q=(r(7706),"CommentsField_addCommentBtn__f8T4k"),G="CommentsField_commentWrapper__GeIxy",J="CommentsField_textarea__0PbiN",$=function(){var e=(0,o.useState)(!1),a=(0,n.Z)(e,2),r=a[0],l=a[1];return(0,k.jsxs)("div",{className:G,children:[(0,k.jsx)("button",{onClick:function(e){e.preventDefault(),l(!r)},className:q,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0434\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),r&&(0,k.jsx)("textarea",{name:"comment",id:"comment",className:J})]})},W=r(4942),Y=r(1413),H=r(4390),Q={deliveryOptions:"DeliveryOptions_deliveryOptions__g59TL",input:"DeliveryOptions_input__vQnib"},z=function(e){var a=e.deliveryType,r=(0,o.useState)({regionName:"",districtName:"",cityName:""}),l=(0,n.Z)(r,2),i=l[0],t=l[1],s=(0,o.useState)([]),c=(0,n.Z)(s,2),d=c[0],u=c[1],m=function(e){t((0,Y.Z)((0,Y.Z)({},i),{},(0,W.Z)({},e.target.dataset.id,e.target.value))),e.target.value||u([])},p=function(e){e.target.value&&"cityName"===e.target.dataset.id&&a.includes("novaPoshta")&&function(e,a){var r=e.cityName;if(a.includes("novaPoshta"))return H.d.post("https://api.novaposhta.ua/v2.0/json/",{apiKey:"240ef9f179d3915765ffe529c873f9b7",modelName:"Address",calledMethod:"getWarehouses",methodProperties:{CityName:r,TypeOfWarehouseRef:{novaPoshtaDepartment:"841339c7-591a-42e2-8233-7a0a00f0ed6f",novaPoshtaMailBox:"f9316480-5f2d-425d-bc2c-ac7cd29decf0"}[a]}}).then((function(e){return e.data.data}))}(i,a).then((function(e){return u(e)}))},_=i.regionName,g=i.districtName,h=i.cityName;return(0,k.jsxs)(k.Fragment,{children:["ukrPoshta"===a&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("input",{"data-id":"regionName",className:Q.input,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043e\u0431\u043b\u0430\u0441\u0442\u044c",onBlur:p,onChange:m,value:_}),(0,k.jsx)("input",{"data-id":"districtName",className:Q.input,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0440\u0430\u0439\u043e\u043d",onBlur:p,onChange:m,value:g})]}),(0,k.jsx)("input",{"data-id":"cityName",className:Q.input,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043e\u0433\u043e \u043f\u0443\u043d\u043a\u0442\u0443",onBlur:p,onChange:m,value:h}),(0,k.jsxs)("select",{className:"".concat(Q.departmentSelect," ").concat(Q.input),name:"select",children:[(0,k.jsx)("option",{value:"",children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0432\u0456\u0434\u0434\u0456\u043b\u0435\u043d\u043d\u044f"}),d.map((function(e){return(0,k.jsx)("option",{value:e.Description,children:e.Description},e.Ref)}))]})]})},K="DeliveryField_title__MqWRS",X="DeliveryField_radioList__Oqqc2",ee="DeliveryField_deliveryItem__K7Lwa",ae="DeliveryField_radioItem__GTV9S",re="DeliveryField_price__f6rRQ",le="DeliveryField_deliveryOptions__Xpsek",ie="DeliveryField_active__4-0vo",ne="DeliveryField_label__uKl3T",te=function(){var e=(0,o.useState)("novaPoshtaDepartment"),a=(0,n.Z)(e,2),r=a[0],l=a[1],i=function(e){l(e.target.value)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h2",{className:K,children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u0430"}),(0,k.jsxs)("ul",{className:X,children:[(0,k.jsxs)("li",{className:"".concat(ee," ").concat("novaPoshtaDepartment"===r&&ie),children:[(0,k.jsxs)("div",{className:ae,children:[(0,k.jsxs)("label",{className:ne,children:[(0,k.jsx)("input",{type:"radio",id:"novaPoshtaDepartment",name:"delivery",value:"novaPoshtaDepartment",onChange:i,checked:"novaPoshtaDepartment"===r}),"\u041d\u0430 \u0432\u0456\u0434\u0434\u0456\u043b\u0435\u043d\u043d\u044f \u041d\u043e\u0432\u043e\u0457 \u043f\u043e\u0448\u0442\u0438"]}),(0,k.jsx)("span",{className:re,children:"65,00 \u0433\u0440\u043d"})]}),(0,k.jsx)("div",{className:le,children:(0,k.jsx)(z,{deliveryType:r})})]}),(0,k.jsxs)("li",{className:"".concat(ee," ").concat("novaPoshtaMailBox"===r&&ie),children:[(0,k.jsxs)("div",{className:ae,children:[(0,k.jsxs)("label",{className:ne,children:[(0,k.jsx)("input",{type:"radio",id:"novaPoshtaMailBox",name:"delivery",value:"novaPoshtaMailBox",onChange:i,checked:"novaPoshtaMailBox"===r}),"\u0414\u043e \u043f\u043e\u0448\u0442\u043e\u043c\u0430\u0442\u0443 \u043d\u043e\u0432\u043e\u0457 \u043f\u043e\u0447\u0442\u0438"]}),(0,k.jsx)("span",{className:re,children:"65,00 \u0433\u0440\u043d"})]}),(0,k.jsx)("div",{className:le,children:(0,k.jsx)(z,{deliveryType:r})})]}),(0,k.jsxs)("li",{className:"".concat(ee," ").concat("ukrPoshta"===r&&ie),children:[(0,k.jsxs)("div",{className:ae,children:[(0,k.jsxs)("label",{className:ne,children:[(0,k.jsx)("input",{type:"radio",id:"ukrPoshta",name:"delivery",value:"ukrPoshta",onChange:i,checked:"ukrPoshta"===r}),"\u041d\u0430 \u0432\u0456\u0434\u0434\u0456\u043b\u0435\u043d\u043d\u044f \u0423\u043a\u0440\u043f\u043e\u0448\u0442\u0438"]}),(0,k.jsx)("span",{className:re,children:"35,00 \u0433\u0440\u043d"})]}),(0,k.jsx)("div",{className:le,children:(0,k.jsx)(z,{deliveryType:r})})]})]})]})},se={orderItem:"OrderTableRow_orderItem__NZhFM",bold:"OrderTableRow_bold__dm2b3",posterWrapper:"OrderTableRow_posterWrapper__a67Iw"},oe=function(e){var a=e.orderData,r=a.title,l=a.author,i=a.price,n=a.small_image,t=a.discount,s=a.quality,o=a.book_year;return(0,k.jsxs)("tr",{className:se.orderItem,children:[(0,k.jsx)("td",{className:se.posterWrapper,children:(0,k.jsx)("img",{className:se.bookPoster,src:n,width:"53",height:"78",alt:r})}),(0,k.jsxs)("td",{children:[(0,k.jsx)("p",{className:se.bold,children:r}),(0,k.jsx)("p",{children:l}),(0,k.jsx)("p",{children:o})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)("p",{children:"\u0426\u0456\u043d\u0430 \u0437\u0430 \u043e\u0434."}),(0,k.jsxs)("p",{className:se.bold,children:[i," \u0433\u0440\u043d"]})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)("p",{children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,k.jsx)("p",{className:se.bold,children:s})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)("p",{children:"\u0417\u043d\u0438\u0436\u043a\u0430"}),(0,k.jsxs)("p",{className:se.bold,children:[t,"%"]})]}),(0,k.jsxs)("td",{children:[(0,k.jsx)("p",{children:"\u041a\u0456\u043d\u0446\u0435\u0432\u0430 \u0446\u0456\u043d\u0430"}),(0,k.jsxs)("p",{className:se.bold,children:[(s*(i-i*t/100)).toFixed(2)," \u0433\u0440\u043d"]})]})]})},ce=r(9434),de="OrderField_title__Y1oYf",ue="OrderField_orderTable__nQgdv",me="OrderField_emptyBasket__-WPcM",pe=function(){var e=(0,ce.v9)((function(e){return e.cart.items}));return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h2",{className:de,children:"\u0412\u0430\u0448\u0435 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),e.length>0?(0,k.jsx)("table",{className:ue,children:(0,k.jsx)("tbody",{children:e.map((function(e){return(0,k.jsx)(oe,{orderData:e},e._id)}))})}):(0,k.jsx)("p",{className:me,children:"\u041a\u043e\u0448\u0438\u043a \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439"})]})},_e="PaymentField_title__h1hb9",ge="PaymentField_radioList__YDtLt",he="PaymentField_label__-rR+g",xe="PaymentField_active__yXe9V",je="PaymentField_paymentItem__l37LV",be=function(){var e=(0,o.useState)("card"),a=(0,n.Z)(e,2),r=a[0],l=a[1],i=function(e){l(e.target.value)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h2",{className:_e,children:"\u0421\u043f\u043e\u0441\u0456\u0431 \u043e\u043f\u043b\u0430\u0442\u0438"}),(0,k.jsxs)("ul",{className:ge,children:[(0,k.jsx)("li",{className:je,children:(0,k.jsxs)("label",{className:"".concat(he," ").concat("card"===r&&xe),children:[(0,k.jsx)("input",{type:"radio",id:"cardPayment",name:"payment",value:"card",onChange:i,checked:"card"===r}),"\u041e\u043f\u043b\u0430\u0442\u0430 \u043a\u0430\u0440\u0442\u043a\u043e\u044e"]})}),(0,k.jsx)("li",{className:je,children:(0,k.jsxs)("label",{className:"".concat(he," ").concat("cash"===r&&xe),children:[(0,k.jsx)("input",{type:"radio",id:"cashPayment",name:"payment",value:"cash",onChange:i,checked:"cash"===r}),"\u041f\u0456\u0441\u043b\u044f\u043e\u043f\u043b\u0430\u0442\u0430"]})})]})]})},Ne="OrderForm_wrapper__UkEMz",ye=(0,o.forwardRef)((function(e,a){var r=e.handleSubmit;return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("form",{className:Ne,onSubmit:r,ref:a,children:[(0,k.jsx)(te,{}),(0,k.jsx)(be,{}),(0,k.jsx)($,{}),(0,k.jsx)(pe,{})]})})}));r(2060)},8914:function(e,a,r){r.d(a,{i:function(){return o}});var l=r(5861),i=r(9439),n=r(7757),t=r.n(n),s=r(2791),o=function(e,a,r){var n=(0,s.useState)(r),o=(0,i.Z)(n,2),c=o[0],d=o[1],u=(0,s.useState)(!1),m=(0,i.Z)(u,2),p=m[0],_=m[1],g=(0,s.useState)(),h=(0,i.Z)(g,2),x=h[0],j=h[1];return(0,s.useEffect)((function(){var a=function(){var a=(0,l.Z)(t().mark((function a(){var r;return t().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,_(!0),a.next=4,e();case 4:r=a.sent,d(r.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),j(a.t0);case 11:return a.prev=11,_(!1),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})));return function(){return a.apply(this,arguments)}}();a()}),a),{data:c,loading:p,error:x}}}}]);
//# sourceMappingURL=523.1b3d38a7.chunk.js.map